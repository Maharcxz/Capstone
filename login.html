<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trinity Optimum Vision Center - Login</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@300;400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="CSS/BaseStyles.css">
    <link rel="stylesheet" href="CSS/AboutUsPageStyles.css">
    <link rel="stylesheet" href="CSS/AdminPageStyles.css">
    <link rel="stylesheet" href="CSS/ConfirmationStyles.css">
    <link rel="stylesheet" href="CSS/ContactUsPageStyles.css">
    <link rel="stylesheet" href="CSS/FrameEditStyles.css">
    <link rel="stylesheet" href="CSS/FrameTypesMenuHeaderStyles.css">
    <link rel="stylesheet" href="CSS/HeaderStyles.css">
    <link rel="stylesheet" href="CSS/LogInModalStyles.css">
    <link rel="stylesheet" href="CSS/LoginPageStyles.css">
    <link rel="stylesheet" href="CSS/NotificationIconPanelStyles.css">
    <link rel="stylesheet" href="CSS/Pre-OrderStyles.css">
    <link rel="stylesheet" href="CSS/ProductGridStyles.css">
    <link rel="stylesheet" href="CSS/ResponsiveNotifStyles.css">
    <link rel="stylesheet" href="CSS/SidebarStyles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    
    <!-- Firebase Configuration (must be loaded first) -->
    <script src="JS/FirebaseConfig.js"></script>
    
    <!-- Application Scripts (loaded after Firebase is initialized) -->
    <script src="JS/AuthHandlers.js"></script>
    <script src="JS/ContentEditingFunc.js"></script>
    <script src="JS/EventListenerFunc.js"></script>
    <script src="JS/FrameCategoryFunc.js"></script>
    <script src="JS/FrameEditingModal.js"></script>
    <script src="JS/NotificationFunc.js"></script>
    <script src="JS/PassToggleFunc.js"></script>
    <script src="JS/Script.js"></script>
    <script src="JS/SeachFunc.js"></script>
    <script src="JS/SidebarFunc.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1 class="maintitle">T R I N I T Y</h1>
                <p class="subtitle">OPTIMUM VISION CENTER</p>
            </div>
            <nav class="nav">
                <div class="nav-left">
                    <a href="index.html" class="nav-link">Home</a>
                    <a href="contact.html" class="nav-link">Contact Us</a>
                    <a href="about.html" class="nav-link">About Us</a>

                    <a href="preorders.html" class="nav-link admin-only" id="preOrdersNav" style="display: none;">Pre-Orders</a>
                </div>
                <div class="nav-right">
                    <div class="nav-icons">
                        <div class="notification-wrapper">
                            <span class="notification-icon" onclick="toggleNotifications()">üîî</span>
                            <span class="notification-badge" id="notificationBadge">0</span>
                        </div>
                    </div>
                    <div class="auth-section">
                        <a href="login.html" class="login-btn active" id="authButton">
                            <span class="user-icon">üë§</span>
                            <span id="authButtonText">Log In</span>
                        </a>
                        <div class="admin-dropdown" id="adminDropdown">
                            <button class="dropdown-item" onclick="switchToGuestMode()">Logout</button>
                            <button class="dropdown-item" onclick="switchToGuestMode()">Switch to Guest View</button>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

        <!-- Notifications Panel -->
        <div class="notifications-panel" id="notificationsPanel">
            <div class="notifications-header">
                <h3>Pre-Order Notifications</h3>
                <span class="close-notifications" onclick="hideNotifications()">√ó</span>
            </div>
            <div class="notifications-list" id="notificationsList">
                <div class="empty-notifications">
                    <p>No pre-orders yet</p>
                </div>
            </div>
        </div>

        <!-- Login Form Section -->
        <div class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <div class="glasses-icon">
                        <svg viewBox="0 0 100 60" class="glasses-svg">
                            <path d="M15 25 Q50 15 85 25 Q90 30 85 35 Q80 40 70 40 L60 40 Q55 35 50 35 Q45 35 40 40 L30 40 Q20 40 15 35 Q10 30 15 25 Z" 
                                fill="none" stroke="#333" stroke-width="3"/>
                            <circle cx="25" cy="32" r="12" fill="none" stroke="#333" stroke-width="3"/>
                            <circle cx="75" cy="32" r="12" fill="none" stroke="#333" stroke-width="3"/>
                            <rect x="68" y="25" width="14" height="14" rx="2" fill="none" stroke="#333" stroke-width="2"/>
                            <text x="75" y="34" text-anchor="middle" fill="#333" font-size="8" font-weight="bold">AR</text>
                        </svg>
                    </div>
                    <h2>ADMIN LOGIN</h2>
                    <p>Access the administrative panel</p>
                </div>
                
                <form class="login-form" id="loginForm">
                    <div class="input-group">
                        <span class="input-icon">‚úâ</span>
                        <input type="email" id="email" name="email" placeholder="Email Address" class="login-input" required>
                    </div>
                    
                    <div class="input-group">
                        <span class="input-icon">üîí</span>
                        <input type="password" id="password" name="password" placeholder="Password" class="login-input" required>
                        <span class="password-toggle" onclick="togglePassword()">üëÅ</span>
                    </div>
                    
                    <button type="submit" class="modal-login-btn">Log In</button>
                    
                    <div class="guest-option">
                        <span class="continue-text">Or go back to</span>
                        <button type="button" class="guest-btn" onclick="window.location.href='index.html'">Home</button>
                    </div>
                </form>
            </div>
        </div>

        <footer class="footer">
            <p>&copy; 2023 Trinity Optimum Vision Center. All rights reserved.</p>
        </footer>
    </div>

    <script>
        // Password toggle function
        function togglePassword() {
            const passwordInput = document.getElementById('password');
            const toggleIcon = document.querySelector('.password-toggle');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleIcon.textContent = 'üôà';
            } else {
                passwordInput.type = 'password';
                toggleIcon.textContent = 'üëÅ';
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            // Add event listener for login form submission
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const email = document.getElementById('email').value;
                    const password = document.getElementById('password').value;
                    
                    console.log('Login attempt with:', email);
                    
                    // Try Firebase authentication first
                    firebase.auth().signInWithEmailAndPassword(email, password)
                        .then((userCredential) => {
                            console.log('Firebase authentication successful');
                            localStorage.setItem('isAdminLoggedIn', 'true');
                            console.log('Login successful');
                            setTimeout(function() {
                                window.location.replace('preorders.html');
                            }, 500);
                        })
                        .catch((error) => {
                            console.log('Firebase authentication failed:', error.message);
                            
                            // Fallback to hardcoded credentials
                            if (email === 'Adminaccount@gmail.com' && password === 'marcpogi') {
                                console.log('Hardcoded authentication successful');
                                localStorage.setItem('isAdminLoggedIn', 'true');
                                console.log('Login successful');
                                setTimeout(function() {
                                    window.location.replace('preorders.html');
                                }, 500);
                            } else {
                                console.log('Authentication failed - invalid credentials');
                                alert('Invalid email or password');
                            }
                        });
                });
            }
        });
    </script>
</body>
</html>