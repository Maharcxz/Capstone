<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Trinity Optimum Vision Center</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@300;400;700&family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="CSS/BaseStyles.css">
    <link rel="stylesheet" href="CSS/HeaderStyles.css">
    <link rel="stylesheet" href="CSS/AdminPageStyles.css">
    <link rel="stylesheet" href="CSS/ProductGridStyles.css">
    <link rel="stylesheet" href="CSS/AdminDashboardStyles.css">
    <link rel="stylesheet" href="CSS/SidebarStyles.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script src="JS/FirebaseConfig.js"></script>
    <script src="JS/AuthHandlers.js"></script>


</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1 class="maintitle">T R I N I T Y</h1>
                <p class="subtitle">OPTIMUM VISION CENTER</p>
            </div>
            <nav class="nav">
                <div class="nav-left">
                    <a href="index.html" class="nav-link">
                        <span>Home</span>
                    </a>
                    <a href="contact.html" class="nav-link">
                        <span>Contact Us</span>
                    </a>
                    <a href="about.html" class="nav-link">
                        <span>About Us</span>
                    </a>

                    <a href="preorders.html" class="nav-link admin-only" id="preOrdersNav" style="display: none;">
                        <span>Pre-Orders</span>
                    </a>
                    <a href="admin-dashboard.html" class="nav-link admin-only" id="productManagementNav" style="display: none;">
                        <span>Product Management</span>
                    </a>
                </div>
                <div class="nav-right">
                    <div class="nav-icons">
                        <div class="preorder-notification-wrapper admin-only" style="display: none;">
                            <span class="preorder-bell-icon" onclick="togglePreorderNotifications()" title="New Pre-Orders">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
                                    <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
                                </svg>
                            </span>
                            <span class="preorder-notification-badge" id="preorderNotificationBadge">0</span>
                        </div>
                    </div>
                    <div class="auth-section">
                        <a href="#" class="login-btn" id="authButton" onclick="handleAuthClick()">
                            <span class="user-icon">ðŸ‘¤</span>
                            <span id="authButtonText">Log In</span>
                        </a>
                        <div class="admin-dropdown" id="adminDropdown">
                            <button class="dropdown-item" onclick="navigateToPreorders()">
                                <span class="dropdown-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"/>
                                    </svg>
                                </span>
                                <span>Pre-Orders</span>
                            </button>
                            <button class="dropdown-item" onclick="toggleContentManagement()">
                                <span class="dropdown-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"/>
                                        <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"/>
                                    </svg>
                                </span>
                                <span>Content Management</span>
                            </button>
                            <button class="dropdown-item" onclick="toggleUserManagement()">
                                <span class="dropdown-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M17 21v-2a4 4 0 00-4-4H5a4 4 0 00-4 4v2"/>
                                        <circle cx="9" cy="7" r="4"/>
                                        <path d="M23 21v-2a4 4 0 00-3-3.87"/>
                                        <path d="M16 3.13a4 4 0 010 7.75"/>
                                    </svg>
                                </span>
                                <span>User Management</span>
                            </button>
                            <button class="dropdown-item" onclick="toggleAdminSettings()">
                                <span class="dropdown-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <circle cx="12" cy="12" r="3"/>
                                        <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
                                    </svg>
                                </span>
                                <span>Settings</span>
                            </button>
                            <hr class="dropdown-divider">
                            <button class="dropdown-item logout-item" onclick="switchToGuestMode()">
                                <span class="dropdown-icon">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"/>
                                        <polyline points="16,17 21,12 16,7"/>
                                        <line x1="21" y1="12" x2="9" y2="12"/>
                                    </svg>
                                </span>
                                <span>Logout</span>
                            </button>
                        </div>
                    </div>
                </div>
            </nav>
        </header>

    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <div class="sidebar" id="frameSidebar">
        <div class="sidebar-content" id="sidebarContent">
            <!-- Categories will be loaded here dynamically -->
        </div>
    </div>

    <div class="admin-dashboard">
        <!-- Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">ADMIN DASHBOARD</h1>
            <p class="dashboard-subtitle">Product Management System</p>
        </div>

        <!-- Toolbar Section -->
        <div class="toolbar-section">
            <div class="toolbar-left">

                <div class="search-container">
                    <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"></circle>
                        <path d="m21 21-4.35-4.35"></path>
                    </svg>
                    <input type="text" class="search-input" id="productSearch" placeholder="Search products..." onkeyup="filterProducts()">
                </div>
                <select class="filter-select" id="categoryFilter" onchange="filterProducts()">
                    <option value="">All Categories</option>
                    <!-- Categories will be loaded dynamically -->
                </select>
                <select class="filter-select" id="visibilityFilter" onchange="filterProducts()">
                    <option value="">All Products</option>
                    <option value="visible">Visible Only</option>
                    <option value="hidden">Hidden Only</option>
                </select>
            </div>
            <div class="toolbar-right">
                <button class="add-category-btn" onclick="openSidebarManagerModal()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"></path>
                        <line x1="12" y1="11" x2="12" y2="17"></line>
                        <line x1="9" y1="14" x2="15" y2="14"></line>
                    </svg>
                    Add Category
                </button>
                <button class="add-product-btn" onclick="openAddProductModal()">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"></line>
                        <line x1="5" y1="12" x2="19" y2="12"></line>
                    </svg>
                    Add New Product
                </button>
            </div>
        </div>

        <!-- Products Grid -->
        <div class="products-grid" id="productsGrid">
            <!-- Products will be loaded here dynamically -->
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <h3>No Products Found</h3>
            <p>Start by adding your first product to the inventory.</p>
        </div>
    </div>

    <!-- Product Modal -->
    <div class="modal-overlay" id="productModal">
        <div class="product-modal">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add New Product</h2>
                <button id="closeProductModalBtn" class="close-btn" onclick="closeProductModal()">&times;</button>
            </div>
            <div class="modal-content">
            
            <form id="productForm">
                <div class="form-group">
                    <label class="form-label" for="productTitle">Product Title *</label>
                    <input type="text" class="form-input" id="productTitle" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="productDescription">Description</label>
                    <textarea class="form-textarea" id="productDescription" placeholder="Enter product description..."></textarea>
                </div>

                <div class="form-group">
                    <label class="form-label" for="productPrice">Price (â‚±) *</label>
                    <input type="number" class="form-input" id="productPrice" step="0.01" min="0" required>
                </div>

                <div class="form-group">
                    <label class="form-label" for="productCategory">Category *</label>
                    <select class="form-select" id="productCategory" required>
                        <option value="">Select Category</option>
                        <!-- Categories will be loaded dynamically -->
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Product Images</label>
                    
                    <!-- Image Upload Options -->
                    <div class="image-upload-section">
                        <div class="upload-option">
                            <label class="form-label" for="productImages">Upload Files (Multiple)</label>
                            <input type="file" class="form-input file-input" id="productImages" accept="image/*" multiple>
                            <small class="form-help-text">Select multiple image files</small>
                        </div>
                        
                        <div class="upload-option">
                            <label class="form-label" for="productImageUrl">Add Image URL</label>
                            <div class="url-input-group">
                                <input type="url" class="form-input" id="productImageUrl" placeholder="https://example.com/image.jpg">
                                <button type="button" class="add-url-btn" onclick="addImageUrl()">Add URL</button>
                            </div>
                            <small class="form-help-text">Add images by URL one at a time</small>
                        </div>
                    </div>
                    
                    <!-- Image Preview Area -->
                    <div class="image-preview-container" id="imagePreviewContainer">
                        <div class="preview-header">
                            <span class="preview-title">Selected Images</span>
                            <button type="button" class="clear-all-btn" onclick="clearAllImages()">Clear All</button>
                        </div>
                        <div class="image-preview-grid" id="imagePreviewGrid">
                            <!-- Image previews will be added here -->
                        </div>
                    </div>
                </div>


            </form>
            
            <div class="modal-actions">
                <button type="button" class="modal-btn cancel-btn" onclick="closeProductModal()">Cancel</button>
                <button type="submit" class="modal-btn save-btn" form="productForm">Save Product</button>
            </div>
            </div>
        </div>
    </div>

    <!-- Sidebar Manager Modal -->
    <div id="sidebarManagerModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Manage Categories</h2>
                <button id="closeSidebarManagerBtn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="add-category-section">
                    <h3>Add New Category</h3>
                    <form id="addCategoryForm">
                        <div class="form-group">
                            <label for="categoryName">Category Name:</label>
                            <input type="text" id="categoryName" name="categoryName" required>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="submit-btn" onclick="addCategoryFromForm()">Add Category</button>
                        </div>
                    </form>
                </div>
                <div class="existing-categories-section">
                    <h3>Existing Categories</h3>
                    <div id="existingCategories"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="JS/ContentEditingFunc.js"></script>
    <script src="JS/EventListenerFunc.js"></script>
    <script src="JS/FrameEditingModal.js"></script>
    <script src="JS/NotificationFunc.js"></script>
    <script src="JS/PassToggleFunc.js"></script>
    <script src="JS/Script.js"></script>
    <script src="JS/SeachFunc.js"></script>
    <script src="JS/SidebarFunc.js"></script>
    <script src="JS/admin-dashboard.js"></script>
</body>
</html>